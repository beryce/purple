if (self.CavalryLogger) { CavalryLogger.start_js(["OKMD0"]); }

__d("MessagingTag",[],(function(a,b,c,d,e,f){e.exports={GROUPS:"groups",UNREAD:"unread",FLAGGED:"flagged",ACTION_ARCHIVED:"action:archived",INBOX:"inbox",MARKETPLACE_FOLDER:"marketplace_folder",OTHER:"other",PENDING:"pending",MONTAGE:"montage",PAGES:"pages",PAGE_BACKGROUND:"page_background",ACTION_COPIED_MESSAGE:"action:copy_message",ACTION_COPIED_SELF_MESSAGE:"copy_self_message",ACTION_COPIED_ATTACHMENT:"action:copy_attachment",ACTION_COPIED_SELF_ATTACHMENT:"copy_self_attachment",EVENT:"event",SENT:"sent",SPAM:"spam",UPDATES:"broadcasts_inbox",BCC:"header:bcc",FILTERED_CONTENT:"filtered_content",FILTERED_CONTENT_BH:"filtered_content_bh",FILTERED_CONTENT_ACCOUNT:"filtered_content_account",FILTERED_CONTENT_QUASAR:"filtered_content_quasar",FILTERED_CONTENT_INVALID_APP:"filtered_content_invalid_app",ONE_WAY_MESSAGE:"one_way_message",UNAVAILABLE_ATTACHMENT:"unavailable_attachment",ARCHIVED:"archived",EMAIL:"email",VOICEMAIL:"voicemail",SPAM_SPOOFING:"spam:spoofing",SPOOF_WARNING:"MTA:spoof_warning",SMS_TAG_ROOT:"SMSShortcode:",APP_ID_ROOT:"app_id:",DOMAIN_AUTH_PASS:"MTA:dmarc:pass",DOMAIN_AUTH_FAIL:"MTA:dmarc:fail",MTA_SYSTEM_MESSAGE:"MTA:system_message",EMAIL_MESSAGE:"source:email",ONE_CLICK_MESSAGE:"page_one_click_message",MARKETPLACE:"marketplace",ROOM:"room",PAGE_FOLLOWUP:"page_followup",MESSAGE_REQUEST_AGGREGATION_UNIT:"message_request_aggregation_unit",IRIS_MAPPING:{FOLDER_INVALID:null,FOLDER_INBOX:"inbox",FOLDER_OTHER:"other",FOLDER_SPAM:"spam",FOLDER_PENDING:"pending",FOLDER_MONTAGE:"montage",FOLDER_HIDDEN:"hidden",FOLDER_DISABLED:"disabled",FOLDER_PAGE_BACKGROUND:"page_background",FOLDER_PAGE_DONE:"page_done",FOLDER_BLOCKED:"blocked"}}}),null);
__d("ChannelConstants",[],(function(a,b,c,d,e,f){var g="channel/";a={CHANNEL_MANUAL_RECONNECT_DEFER_MSEC:2e3,MUTE_WARNING_TIME_MSEC:25e3,WARNING_COUNTDOWN_THRESHOLD_MSEC:15e3,ON_SHUTDOWN:g+"shutdown",ON_INVALID_HISTORY:g+"invalid_history",ON_CONFIG:g+"config",ON_ENTER_STATE:g+"enter_state",ON_EXIT_STATE:g+"exit_state",ATTEMPT_RECONNECT:g+"attempt_reconnect",RTI_SESSION:g+"new_rti_address",CONSOLE_LOG:g+"message:console_log",GET_RTI_SESSION_REQUEST:g+"rti_session_request",SKYWALKER:g+"skywalker",CHANNEL_ESTABLISHED:g+"established",OK:"ok",ERROR:"error",ERROR_MAX:"error_max",ERROR_MISSING:"error_missing",ERROR_MSG_TYPE:"error_msg_type",ERROR_SHUTDOWN:"error_shutdown",ERROR_STALE:"error_stale",SYS_OWNER:"sys_owner",SYS_NONOWNER:"sys_nonowner",SYS_ONLINE:"sys_online",SYS_OFFLINE:"sys_offline",SYS_TIMETRAVEL:"sys_timetravel",HINT_AUTH:"shutdown auth",HINT_CONN:"shutdown conn",HINT_DISABLED:"shutdown disabled",HINT_INVALID_STATE:"shutdown invalid state",HINT_MAINT:"shutdown maint",HINT_UNSUPPORTED:"shutdown unsupported",reason_Unknown:0,reason_AsyncError:1,reason_TooLong:2,reason_Refresh:3,reason_RefreshDelay:4,reason_UIRestart:5,reason_NeedSeq:6,reason_PrevFailed:7,reason_IFrameLoadGiveUp:8,reason_IFrameLoadRetry:9,reason_IFrameLoadRetryWorked:10,reason_PageTransitionRetry:11,reason_IFrameLoadMaxSubdomain:12,reason_NoChannelInfo:13,reason_NoChannelHost:14,CAPABILITY_VOIP_INTEROP:8,CAPABILITY_ACTIVE_ON_DESKTOP_APP:16384,CAPABILITY_PLAYING_INSTANT_GAME:2097152,FANTAIL_SERVICE:"WebchatClient",SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe",FAKE_DFF:"fake_dff",THROTTLED:g+"throttled",JUMPSTART:g+"jumpstart",ENTITY_PRESENCE_ACTIVE_PING:"entity_presence/active_ping",ENTITY_PRESENCE_SKIPPED_PING:"entity_presence/skipped_ping",SUBSCRIPTION_STATE:{SUBSCRIBE:"s",MUTATE_CONTEXT:"m",UNSUBSCRIBE:"u"},DEFAULT_MAX_SUBSCRIPTIONS:300,DEFAULT_EVICTION_BATCH_SIZE:20,DEFAULT_MAX_SUBSCRIPTION_FLUSH_BATCH_SIZE:300,DEFAULT_MAX_CONSECUTIVE_FLUSH_FAILURES:3,getArbiterType:function(a){return g+"message:"+a},getRTISkywalkerArbiterType:function(a,b){return g+"skywalker:"+a+":"+b}};e.exports=a}),null);
__d("AvailableListConstants",[],(function(a,b,c,d,e,f){a=Object.freeze({ON_AVAILABILITY_CHANGED:"buddylist/availability-changed",ON_UPDATE_ERROR:"buddylist/update-error",ON_UPDATED:"buddylist/updated",ON_CHAT_NOTIFICATION_CHANGED:"chat-notification-changed",OFFLINE:0,IDLE:1,ACTIVE:2,MOBILE:3,WEB_STATUS:"webStatus",FB_APP_STATUS:"fbAppStatus",MESSENGER_STATUS:"messengerStatus",OTHER_STATUS:"otherStatus",STATUS_ACTIVE:"active",STATUS_IDLE:"idle",STATUS_OFFLINE:"offline"});e.exports=a}),null);
__d("ChatReliabilityEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ERROR:"error",CHANNEL_DISCONNECT:"channel_disconnect",CHANNEL_CONNECT:"channel_connect",CHANNEL_INIT:"channel_init",CHANNEL_NOCONFIG:"channel_noconfig",CHANNEL_HISTORY_INVALID:"channel_history_invalid",CHANNEL_STALLED:"channel_stalled",MESSAGE_RECEIVED:"msg_received",MESSAGE_SEND_START:"msg_send_start",THREAD_INFO_ENDPOINT_FATAL:"thread_info_fatal",DFF_ENDPOINT_FATAL:"invalidate_global_state_fatal",DFF_DELTA_INIT:"dff_initiated_by_delta",DFF_HOLE_INIT:"dff_initiated_by_hole",FETCHING_MANY_MESSAGES:"fetching_many_messages",THREAD_INFO_MISSING:"thread_info_missing",SET_THREAD_ID_MAP:"set_thread_id_map",DELETE_THREAD:"delete_thread",PROCESS_DELTA:"process_delta",RTI_SESSION:"chatproxy_rti_session",ON_INVALID_HISTORY:"chatproxy_on_invalid_history",GET_DEBUG_PRESENCE:"chatproxy_get_debug_presence"})}),null);
__d("ChatReliabilityTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:ChatReliabilityLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:ChatReliabilityLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:ChatReliabilityLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setEventData=function(a){this.$1.event_data=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={event:!0,event_data:!0,time:!0,weight:!0};e.exports=a}),null);
__d("ChatReliabilityInstrumentation",["ChatReliabilityEvents","ChatReliabilityTypedLogger","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,c){if(!b("gkx")("678576"))return;new(b("ChatReliabilityTypedLogger"))().setEvent(a).setEventData(c).log()};a={logERROR:function(a){g(b("ChatReliabilityEvents").ERROR,a)},logCHANNEL_DISCONNECT:function(a){g(b("ChatReliabilityEvents").CHANNEL_DISCONNECT,a)},logCHANNEL_CONNECT:function(a){g(b("ChatReliabilityEvents").CHANNEL_CONNECT,a)},logCHANNEL_HISTORY_INVALID:function(a){g(b("ChatReliabilityEvents").CHANNEL_HISTORY_INVALID,a)},logMESSAGE_RECEIVED:function(a){g(b("ChatReliabilityEvents").MESSAGE_RECEIVED,a)},logMESSAGE_SEND_START:function(a){g(b("ChatReliabilityEvents").MESSAGE_SEND_START,a)},logCHANNEL_STALLED:function(a){g(b("ChatReliabilityEvents").CHANNEL_STALLED,a)},logCHANNEL_INIT:function(a){g(b("ChatReliabilityEvents").CHANNEL_INIT,a)},logCHANNEL_NOCONFIG:function(a){g(b("ChatReliabilityEvents").CHANNEL_NOCONFIG,a)},logDFF_DELTA_INIT:function(a){g(b("ChatReliabilityEvents").DFF_DELTA_INIT,a)},logDFF_HOLE_INIT:function(a){g(b("ChatReliabilityEvents").DFF_HOLE_INIT,a)},logFETCHING_MANY_MESSAGES:function(a){g(b("ChatReliabilityEvents").FETCHING_MANY_MESSAGES,a)},logPROCESS_DELTA:function(a){g(b("ChatReliabilityEvents").PROCESS_DELTA,a)},logTHREAD_INFO_MISSING:function(a){g(b("ChatReliabilityEvents").THREAD_INFO_MISSING,a)},logSET_THREAD_ID_MAP:function(a){g(b("ChatReliabilityEvents").SET_THREAD_ID_MAP,a)},logDELETE_THREAD:function(a){g(b("ChatReliabilityEvents").DELETE_THREAD,a)},logCHATPROXY_EVENT:function(a){g(a)}};e.exports=a}),null);
__d("LastActiveTimes",["fbt","ServerTime"],(function(a,b,c,d,e,f,g){__p&&__p();var h={};function i(a){__p&&__p();if(!a||a<0)return null;a=b("ServerTime").get()/1e3-a;a=Math.floor(a/60);var c=Math.floor(a/60),d=Math.floor(c/24);if(a<=1)return g._({"*":"{count}m"},[g._param("count",1,[0])]);else if(a<60)return g._({"*":"{count}m"},[g._param("count",a,[0])]);else if(c<24)return g._({"*":"{count}h"},[g._param("count",c,[0])]);else if(d<3)return g._({"*":"{count}d"},[g._param("count",d,[0])]);else return null}function j(a,b){(!(a in h)||h[a]<b)&&(h[a]=b)}function k(a){if(a in h)return h[a];else return 0}a={update:function(a){for(var b in a)j(b,a[b])},getShortDisplay:function(a){return i(k(a))},get:function(a){return k(a)},getDebugData:function(){return h}};e.exports=a}),null);
__d("PresencePrivacy",["Arbiter","ArbiterMixin","AsyncRequest","Bootloader","ChannelConstants","CurrentUser","JSLogger","PresencePrivacyInitialData","PresenceUtil","gkx","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g="/ajax/chat/privacy/settings.php",h="/ajax/chat/privacy/online_policy.php",i="/ajax/chat/privacy/visibility.php",j="friend_visibility",k="visibility",l="online_policy",m=babelHelpers["extends"]({},(c=b("PresencePrivacyInitialData")).privacyData),n=c.visibility,o=babelHelpers["extends"]({},c.privacyData),p=n,q=c.onlinePolicy,r=q,s=[],t=!1;function u(){return b("JSLogger").create("blackbird")}d=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.WHITELISTED=1,c.BLACKLISTED=-1,c.UNLISTED=0,c.ONLINE=1,c.OFFLINE=0,c.ONLINE_TO_WHITELIST=0,c.ONLINE_TO_BLACKLIST=1,b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.init=function(a,b,c){};c.setVisibility=function(a){p=n;z(a);var b={visibility:a},c={type:k,visibility:a},d=H(i,b,c);C(d,c);u().log("set_visibility",{data:b});return a};c.getVisibility=function(){return n};c.setOnlinePolicy=function(a){r=q;A(a);var b={online_policy:a},c={type:l,online_policy:a},d=H(h,b,c);C(d,c);u().log("set_online_policy",{data:b});return a};c.getOnlinePolicy=function(){return q};c.getFriendVisibility=function(a){return m[a]||v.UNLISTED};c.getFriendsVisibility=function(){return m};c.isUserOffline=function(){return this.getVisibility()===v.OFFLINE};c.allows=function(a){return this.isUserOffline()?!1:this.allowsIfViewerIsOnline(a)};c.allowsIfViewerIsOnline=function(a){var b=this.getOnlinePolicy();return b===v.ONLINE_TO_WHITELIST?m[a]==v.WHITELISTED:m[a]!=v.BLACKLISTED};c.getOnlinePolicyStr=function(){if(this.isUserOffline())return"offline";var a=this.getOnlinePolicy();if(a===v.ONLINE_TO_WHITELIST)return"online_to_whitelist";return a===v.ONLINE_TO_BLACKLIST?"online_to_blacklist":"unknown"};c.setFriendsVisibility=function(a,b){__p&&__p();if(a.length>0){var c={};for(var d=0;d<a.length;d++){var e=a[d];o[e]=m[e];c[e]=b}w(c);e=b;e==v.UNLISTED&&(e=o[a[0]]);d={users:a,setting:b,setting_type:e};a={type:j,settings:c};e=H(g,d,a);C(e,a);u().log("set_friend_visibility",{data:d})}return b};c.setFriendVisibilityMap=function(a,b){for(var c in a)o[c]=m[c];w(a);var d={type:j,settings:a};C(G(b,d),d);u().log("set_friend_visibility_from_map",{data:a})};c.allow=function(a){__p&&__p();if(this.allows(a)){u().error("allow_already_allowed");throw new Error("allow() should only be called for users that are not already allowed")}if(this.getVisibility()===v.OFFLINE){u().error("allow_called_while_offline");throw new Error("allow() should only be called when the user is already online")}var b=this.getOnlinePolicy()===v.ONLINE_TO_WHITELIST?v.WHITELISTED:v.UNLISTED;return this.setFriendsVisibility([a],b)};c.disallow=function(a){__p&&__p();if(!this.allows(a)){u().error("disallow_already_disallowed");throw new Error("disallow() should only be called for users that are not already disallowed")}if(this.getVisibility()===v.OFFLINE){u().error("disallow_called_while_offline");throw new Error("disallow() should only be called when the user is already online")}var b=this.getOnlinePolicy()===v.ONLINE_TO_BLACKLIST?v.BLACKLISTED:v.UNLISTED;return this.setFriendsVisibility([a],b)};c.getBlacklist=function(){var a=[];for(var b in m)m[b]===v.BLACKLISTED&&a.push(b);return a};c.getWhitelist=function(){var a=[];for(var b in m)m[b]===v.WHITELISTED&&a.push(b);return a};c.getMapForTest=function(){return m};c.setMapForTest=function(a){m=a};return b}(b("mixin")(b("ArbiterMixin")));var v=new d();function w(a){__p&&__p();var c;for(c in a){var d=a[c];if(c==b("CurrentUser").getID()){u().error("set_viewer_visibility");throw new Error("Invalid to set current user's visibility")}switch(d){case v.WHITELISTED:case v.BLACKLISTED:case v.UNLISTED:break;default:u().error("set_invalid_friend_visibility",{id:c,value:d});throw new Error("Invalid state: "+d)}}for(c in a)m[c]=a[c];v.inform("privacy-changed")}function x(a,b){var c={};c[a]=b;w(c)}function y(a){b("gkx")("845716")&&b("Bootloader").loadModules(["MessengerMQTTPresenceReporting"],function(b){b.reportChatVisibility(!!a)},"PresencePrivacy")}function z(a){switch(a){case v.ONLINE:case v.OFFLINE:break;default:u().error("set_invalid_visibility",{value:a});throw new Error("Invalid visibility: "+a)}n=a;y(a);v.inform("privacy-changed");v.inform("privacy-user-presence-changed")}function A(a){switch(a){case v.ONLINE_TO_WHITELIST:case v.ONLINE_TO_BLACKLIST:break;default:throw new Error("Invalid default online policy: "+a)}q=a;v.inform("privacy-user-presence-changed");v.inform("privacy-changed")}function B(a,b){t=!0,a.send()}function C(a,b){s.push({request:a,data:b});if(!t){a=s.shift();B(a.request,a.data)}}function D(a,b){var c=a.type;if(c===j){v.inform("privacy-availability-changed");for(var d in a.settings)o[d]=a.settings[d]}else c===k?p=a.visibility:c===l&&(r=a.online_policy),v.inform("privacy-user-presence-response");u().log("set_update_response",{data:a,response:b})}function E(a,b){n!==p&&z(p),q!==r&&A(r),Object.assign(m,o),v.inform("privacy-changed"),s=[],u().log("set_error_response",{data:a,response:b})}function F(a){t=!1;if(s.length>0){a=s.shift();B(a.request,a.data)}}function G(a,c){if(b("PresenceUtil")!=null){var d=a.getData();d.window_id=b("PresenceUtil").getSessionID();a.setData(d)}a.setHandler(D.bind(this,c)).setErrorHandler(E.bind(this,c)).setTransportErrorHandler(E.bind(this,c)).setFinallyHandler(F.bind(this)).setAllowCrossPageTransition(!0);return a}function H(a,c,d){return G(new(b("AsyncRequest"))(a).setData(c),d)}function a(a,c){__p&&__p();var d=c.obj;if(d.viewer_id!=b("CurrentUser").getID()){u().error("invalid_viewer_for_channel_message",{type:a,data:c});throw new Error("Viewer got from the channel is not the real viewer")}if(d.window_id===b("PresenceUtil").getSessionID())return;var e=d.data;if(d.event=="access_control_entry")e.target_ids.forEach(function(a){x(a,e.setting),o[a]=e.setting});else{if(d.event=="visibility_update"){a=e.visibility?v.ONLINE:v.OFFLINE;z(a);p=a}else d.event=="online_policy_update"&&(A(e.online_policy),r=e.online_policy);v.inform("privacy-user-presence-response")}u().log("channel_message_received",{data:c.obj})}v.inform("privacy-changed");v.inform("privacy-user-presence-changed","state");u().log("initialized",{visibility:n,policy:q});b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,c){c.presence_privacy={initial:b("PresencePrivacyInitialData").privacyData,current:m}});b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("privacy_changed"),a.bind(this));b("Arbiter").subscribe(b("ChannelConstants").ON_CONFIG,function(a,b){a=b.getConfig("visibility",null);if(a!==null&&typeof a!=="undefined"){b=a?v.ONLINE:v.OFFLINE;z(b);u().log("config_visibility",{vis:b})}}.bind(this));e.exports=v}),null);
__d("ChatVisibility",["Arbiter","JSLogger","PresencePrivacy"],(function(a,b,c,d,e,f){var g={isOnline:function(){return b("PresencePrivacy").getVisibility()===b("PresencePrivacy").ONLINE},hasBlackbirdEnabled:function(){return this.isVisibleToMostFriends()||this.isVisibleToSomeFriends()},isVisibleToMostFriends:function(){return b("PresencePrivacy").getOnlinePolicy()===b("PresencePrivacy").ONLINE_TO_BLACKLIST&&b("PresencePrivacy").getBlacklist().length>0},isVisibleToSomeFriends:function(){return b("PresencePrivacy").getOnlinePolicy()===b("PresencePrivacy").ONLINE_TO_WHITELIST&&b("PresencePrivacy").getWhitelist().length>0},goOnline:function(a){b("PresencePrivacy").getVisibility()===b("PresencePrivacy").OFFLINE&&(b("JSLogger").create("blackbird").log("chat_go_online"),b("PresencePrivacy").setVisibility(b("PresencePrivacy").ONLINE),b("Arbiter").inform("chat-visibility/go-online")),a&&a()},goOffline:function(a){b("PresencePrivacy").getVisibility()===b("PresencePrivacy").ONLINE&&(b("JSLogger").create("blackbird").log("chat_go_offline"),b("PresencePrivacy").setVisibility(b("PresencePrivacy").OFFLINE),b("Arbiter").inform("chat-visibility/go-offline")),a&&a()},toggleVisibility:function(){g.isOnline()?g.goOffline():g.goOnline()}};e.exports=g}),null);
__d("PresenceConfig",["PresenceConfigInitialData"],(function(a,b,c,d,e,f){var g=Object.assign({},b("PresenceConfigInitialData"));a={get:function(a,b){return a in g?g[a]:b}};e.exports=a}),null);
__d("PresenceStatus",["ArbiterMixin","AvailableListConstants","AvailableListInitialData","BanzaiODS","Bootloader","ChatVisibility","CurrentUser","FBIDCheck","FBLogger","LastActiveTimes","PresenceConfig","PresencePrivacy","ServerTime","createObjectFrom","debounceAcrossTransitions","gkx"],(function(a,b,c,d,e,f){__p&&__p();b("BanzaiODS").setEntitySample("presence",1e-4);var g={},h={},i={},j={},k=Object.assign({},b("ArbiterMixin")),l=b("debounceAcrossTransitions")(function(){return k.inform("change")},0);function m(a){var c,d=parseInt(a.topic.match(/\d+$/),10);a=parseInt(JSON.parse(a.payload).lat,10);var e=Date.now()-a*1e3;e=b("PresenceConfig").get("active_cutoff")*1e3-e;b("LastActiveTimes").update((c={},c[d]=a,c));k.checkPresence(d);k.get(d)===b("AvailableListConstants").ACTIVE&&(window.clearTimeout(j[d].timeout),j[d].timeout=window.setTimeout(function(){k.checkPresence(d)},e))}function n(a){return/^\d+$/.test(a)}Object.assign(k,{resetPresenceData:function(){g={},h={}},reset:function(){k.resetPresenceData(),i={}},get:function(a){!n(a)&&b("PresenceConfig").get("presence_throw_for_malformed_id")&&b("FBLogger")("presence").warn("received malformed id '%s'",a);if(a==b("CurrentUser").getID())return b("ChatVisibility").isOnline()?b("AvailableListConstants").ACTIVE:b("AvailableListConstants").OFFLINE;n(a)&&!b("FBIDCheck").isUser_deprecated(a)&&!j[a]&&(b("BanzaiODS").bumpEntityKey(3303,"presence","page_subscribe"),j[a]={},b("PresenceConfig").get("presence_page_green_dot_sub")&&b("Bootloader").loadModules(["SkywalkerManager"],function(b){return b.subscribe("presence_push/fb/"+a,m)},"PresenceStatus"));var c=b("AvailableListConstants").OFFLINE;a in g&&(c=g[a]);b("PresencePrivacy").allows(a)||(c=b("AvailableListConstants").OFFLINE);return c},getCapabilities:function(a){a=h[a];return a?a:0},isPlayingCanvasGameUser:function(a){return!!i[a]},getGroup:function(a){return a.some(function(a){return a==b("CurrentUser").getID()?!1:k.get(a)===b("AvailableListConstants").ACTIVE})?b("AvailableListConstants").ACTIVE:b("AvailableListConstants").OFFLINE},set:function(a,c,d,e,f,i){__p&&__p();if(a==b("CurrentUser").getID())return!1;var j;if(c!==null&&c!==void 0){c=c==b("AvailableListConstants").ACTIVE?b("AvailableListConstants").ACTIVE:b("AvailableListConstants").OFFLINE;d=k.get(a);j=d!=c;if((j||c==b("AvailableListConstants").ACTIVE)&&b("FBIDCheck").isUser_deprecated(a)){b("LastActiveTimes").update((e={},e[a]=b("ServerTime").get()/1e3,e))}g[a]=c}d=!1;f!==void 0&&f!==null&&(d=k.getCapabilities(a)!=f,h[a]=f);e=j||d;e&&!i&&l();return e},setPlayingCanvasGameFriends:function(a){if(!b("gkx")("678262"))return;i=b("createObjectFrom")(a)},getOnlineIDs:function(){var a,c=[];for(a in g)k.get(a)===b("AvailableListConstants").ACTIVE&&c.push(a);return c},getAllIDs:function(){return Object.keys(g)},getOnlineCount:function(){return k.getOnlineIDs().length},getPresenceStats:function(){__p&&__p();var a=0,c=0,d=0;for(var e in g){a+=1;switch(k.get(e)){case b("AvailableListConstants").OFFLINE:c+=1;break;case b("AvailableListConstants").ACTIVE:d+=1;break;default:break}}return{total:a,offline:c,active:d}},getAllDebugInfo:function(){var a={};for(var b in g)a[b]={p:g[b],vc:h[b]};return a},setMultiFromMQTT:function(a){var c={};Array.isArray(a)&&a.forEach(function(a){a.l&&(c[a.u]=a.l),k.set(a.u,a.p,!1,"mqtt",a.c,!0)});b("LastActiveTimes").update(c);l()},setMultiChatproxy:function(a){var c={};for(var d in a){a[d].lat&&(c[d]=a[d].lat);var e=a[d].p;k.set(d,e,!1,"chatproxy",a[d].vc,!0)}b("LastActiveTimes").update(c);l()},setMultiActive:function(a,c){var d=!1;a.forEach(function(a){k.set(a,b("AvailableListConstants").ACTIVE,!1,c,null,!0)&&(d=!0)});d&&l()},checkPresence:function(a){var c=!1,d=Math.ceil(Date.now()/1e3)-b("LastActiveTimes").get(a);k.set(a,d<b("PresenceConfig").get("active_cutoff")?b("AvailableListConstants").ACTIVE:b("AvailableListConstants").OFFLINE,!1,"pylon",null,!0)&&(c=!0);c&&l()}});b("AvailableListInitialData").activeList&&b("AvailableListInitialData").activeList.length>0&&k.setMultiActive(b("AvailableListInitialData").activeList,"available_list_active");b("AvailableListInitialData").playingNow&&b("AvailableListInitialData").playingNow.length>0&&k.setPlayingCanvasGameFriends(b("AvailableListInitialData").playingNow);b("AvailableListInitialData").lastActiveTimes&&Object.keys(b("AvailableListInitialData").lastActiveTimes).length>0&&b("LastActiveTimes").update(b("AvailableListInitialData").lastActiveTimes);e.exports=k}),null);
__d("ChatproxyPresence",["Arbiter","AvailableListConstants","AvailableListInitialData","BanzaiODS","ChannelConstants","ChatReliabilityEvents","ChatReliabilityInstrumentation","LastActiveTimes","PresenceStatus","debounceAcrossTransitions","gkx"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=!1,this.$3=b("AvailableListInitialData").chatNotif,this.$4=!1}var c=a.prototype;c.subscribe=function(){__p&&__p();var a=this,c,d;(c=b("Arbiter")).subscribe((d=b("ChannelConstants")).getArbiterType("chatproxy-presence"),this.updatePresenceInfo.bind(this));c.subscribe(d.ON_INVALID_HISTORY,function(){b("ChatReliabilityInstrumentation").logCHATPROXY_EVENT(b("ChatReliabilityEvents").ON_INVALID_HISTORY),a.$2=!0});c.subscribe(d.RTI_SESSION,function(c,d){b("ChatReliabilityInstrumentation").logCHATPROXY_EVENT(b("ChatReliabilityEvents").RTI_SESSION),d&&(a.$4=d)});c.subscribe(d.getArbiterType("get_debug_presence"),function(c,d){__p&&__p();b("ChatReliabilityInstrumentation").logCHATPROXY_EVENT(b("ChatReliabilityEvents").GET_DEBUG_PRESENCE);c=b("PresenceStatus").getAllDebugInfo();d=b("LastActiveTimes").getDebugData();for(var e in d){var f=c[e];f===void 0&&(f={},c[e]=f);f.l=Math.floor(d[e])}a.$4.issueRequest("/debug_presence",{},c,function(){b("BanzaiODS").bumpEntityKey(2966,"ChatproxyPresence","debug_presence.sucess")})})};c.getRTISession=function(){return this.$4};c.updatePresenceInfo=function(a,c){__p&&__p();this.$2&&(this.$2=!1,b("PresenceStatus").resetPresenceData());c=c.obj;if(!b("gkx")("845715")){a=c.buddyList;b("PresenceStatus").setMultiChatproxy(a)}a=!1;c.chatNotif!==void 0&&(a=this.$3!==c.chatNotif);a&&(this.$3=c.chatNotif);c.gamers&&b("PresenceStatus").setPlayingCanvasGameFriends(c.gamers);a&&this.$1(b("AvailableListConstants").ON_CHAT_NOTIFICATION_CHANGED,this.$3);b("debounceAcrossTransitions")(function(){this.$1(b("AvailableListConstants").ON_AVAILABILITY_CHANGED)}.bind(this),0)()};c.getWebChatNotification=function(){return this.$3};return a}();e.exports=a}),null);
__d("ExplicitRegistrationDispatcherUtils",["emptyFunction","gkx","setImmediate"],(function(a,b,c,d,e,f){"use strict";a=!1;c=b("emptyFunction");e.exports={warn:c,inlineRequiresEnabled:a}}),null);
__d("ExplicitRegistrationDispatcher",["Dispatcher_DEPRECATED","ExplicitRegistrationDispatcherUtils","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b){var c;b=b.strict;c=a.call(this)||this;c.$ExplicitRegistrationDispatcher2=b;c.$ExplicitRegistrationDispatcher1={};return c}var c=b.prototype;c.explicitlyRegisterStore=function(a){a=a.getDispatchToken();this.$ExplicitRegistrationDispatcher1[a]=!0;return a};c.explicitlyRegisterStores=function(a){var b=this;return a.map(function(a){return b.explicitlyRegisterStore(a)})};c.register=function(b,c){var d=this;d=this.__genID(c);this.$ExplicitRegistrationDispatcher1[d]=!1;c=a.prototype.register.call(this,this.$ExplicitRegistrationDispatcher4.bind(this,d,b),d);return c};c.$ExplicitRegistrationDispatcher4=function(a,b,c){(this.$ExplicitRegistrationDispatcher1[a]||!this.$ExplicitRegistrationDispatcher2)&&this.__invokeCallback(a,b,c)};c.unregister=function(b){a.prototype.unregister.call(this,b),delete this.$ExplicitRegistrationDispatcher1[b]};c.__getMaps=function(){};return b}(b("Dispatcher_DEPRECATED"));e.exports=a}),null);
__d("ChatDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("ExplicitRegistrationDispatcher"));e.exports=new a({strict:!1})}),null);
__d("PresenceStatusActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")({AVAILABILITY_CHANGED:null})}),null);
__d("TypingStates",[],(function(a,b,c,d,e,f){a=Object.freeze({INACTIVE:0,TYPING:1,QUITTING:2});e.exports=a}),null);
__d("AvailableList",["Arbiter","ArbiterMixin","AsyncRequest","AvailableListConstants","BanzaiODS","Bootloader","ChannelConstants","ChatConfig","ChatDispatcher","ChatproxyPresence","ChatReliabilityInstrumentation","ChatVisibility","CurrentUser","FBIDCheck","FBLogger","JSLogger","LastActiveTimes","PresencePrivacy","PresenceStatus","PresenceStatusActionTypes","Run","ServerTime","TypingStates","debounceAcrossTransitions","emptyFunction","gkx","requireWeak"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("BanzaiODS").setEntitySample("presence",1e-4);var g=babelHelpers["extends"]({},b("AvailableListConstants"),b("ArbiterMixin")),h=/\D/;g.subscribe([b("AvailableListConstants").ON_AVAILABILITY_CHANGED,b("AvailableListConstants").ON_UPDATE_ERROR],function(a,c){b("Arbiter").inform(a,c)});b("PresenceStatus").subscribe("change",b("debounceAcrossTransitions")(function(){g.inform(b("AvailableListConstants").ON_AVAILABILITY_CHANGED)},0));var i=b("debounceAcrossTransitions")(function(){g.inform(b("AvailableListConstants").ON_AVAILABILITY_CHANGED),b("ChatDispatcher").dispatch({type:b("PresenceStatusActionTypes").AVAILABILITY_CHANGED})},0);function j(a,c,d,e,f){if(a===b("CurrentUser").getID())return;c=b("PresenceStatus").set(a,c,d,e,f);if(c){d=b("debounceAcrossTransitions")(function(){g.inform(b("AvailableListConstants").ON_AVAILABILITY_CHANGED,a),b("ChatDispatcher").dispatch({type:b("PresenceStatusActionTypes").AVAILABILITY_CHANGED,id:a})},0);d()}}function k(a){a=a.payload.availability||{};for(var b in a)j(b&&b.toString(),a[b].a,!0,"mercury_tabs",a[b].c)}function l(a){if(!a||a==="0"||h.test(a)){b("ChatReliabilityInstrumentation").logERROR("bad id for available list: "+a);return}new(b("AsyncRequest"))("/ajax/mercury/tabs_presence.php").setData({target_id:a}).setHandler(k).setErrorHandler(b("emptyFunction")).setAllowCrossPageTransition(!0).send()}function a(a,c){c.chat_config=b("ChatConfig").getDebugInfo(),c.available_list_debug_info={count:b("PresenceStatus").getOnlineIDs().length}}var m=void 0;try{m=new(b("ChatproxyPresence"))(function(a){g.inform(a)}),m.subscribe()}catch(a){b("FBLogger")("chat").catching(a).mustfix("Failed to subscribe to chat proxy presence"),b("ChatReliabilityInstrumentation").logERROR(a.getMessage())}Object.assign(g,{getChatproxyPresenceObject:function(){return m},get:function(a){return b("PresenceStatus").get(a)},updateForID:function(a){if(b("ChatConfig").get("presence_page_green_dot_sub")&&!b("FBIDCheck").isUser_deprecated(a))return;l(a);b("PresencePrivacy").getVisibility()==b("PresencePrivacy").ONLINE&&b("Run").onAfterLoad(function(){b("gkx")("845715")?b("Bootloader").loadModules(["MessengerMQTTPresence"],function(b){b.sendAdditionalBuddyRequest(a)},"AvailableList"):b("Bootloader").loadModules(["ChannelManager","ChannelTransport"],function(b,c){b.startChannelManager(),c.sendAdditionalBuddyRequest(b.getCompleteConfig(),a)},"AvailableList")})},getWebChatNotification:function(){return m&&m.getWebChatNotification()},isReady:function(){return!!m},set:function(a,b,c,d){j(a,b,!0,c,d)}});b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,a);b("PresencePrivacy").subscribe(["privacy-changed","privacy-availability-changed","privacy-user-presence-response"],i);b("requireWeak")("ChannelConnection",function(a){return a.subscribe([a.CONNECTED,a.RECONNECTING,a.SHUTDOWN,a.MUTE_WARNING,a.UNMUTE_WARNING],i)});function c(a,c){__p&&__p();if(b("gkx")("845715"))return;a={};var d=[];c=c.obj.overlay;for(var e in c){g.set(e,c[e].a,c[e].s||"channel",c[e].vc);c[e].la&&(a[e]=c[e].la);var f=c[e].c&b("ChannelConstants").CAPABILITY_PLAYING_INSTANT_GAME;f!==0&&d.push(e)}b("LastActiveTimes").update(a)}b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("buddylist_overlay"),c);b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("buddylist_overlay_buffered"),c);b("Bootloader").loadModules(["MercurySyncEventsProxy"],function(a){__p&&__p();b("Arbiter").subscribe([a.getArbiterTypeForFBID(b("CurrentUser").getID(),a.Events.TYP)],function(a,c){__p&&__p();a=c.obj;if(a.st===b("TypingStates").TYPING){c=a.from;if(b("ChatVisibility").isOnline()){b("BanzaiODS").bumpEntityKey(3303,"presence","stale_presence_check_typing");a=b("PresenceStatus").get(c);if(a!=b("AvailableListConstants").ACTIVE){a=b("LastActiveTimes").get(c)*1e3;var d=b("ServerTime").get();if(!a)b("BanzaiODS").bumpEntityKey(3303,"presence","no_detailed_presence_typing");else if(d-a>5*60*1e3){var e="stale_presence_typing";d=d-a;d<10*60*1e3?e+="600":d<60*60*1e3&&(e+="3600");b("BanzaiODS").bumpEntityKey(3303,"presence",e)}}}g.set(c&&c.toString(),b("AvailableListConstants").ACTIVE,"channel-typing")}})},"AvailableList");b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("messaging"),function(a,c){__p&&__p();if(!b("ChatVisibility").isOnline())return;a=c.obj;if(a.message&&a.message.timestamp&&a.message.sender_fbid){c=b("ServerTime").get();var d=a.message.timestamp;if(c-d<2*60*1e3){b("BanzaiODS").bumpEntityKey(3303,"presence","stale_presence_check");c=a.message.sender_fbid;a=b("PresenceStatus").get(c);if(a==b("AvailableListConstants").ACTIVE)return;a=b("LastActiveTimes").get(c)*1e3;if(!a)b("BanzaiODS").bumpEntityKey(3303,"presence","no_detailed_presence");else if(d-a>5*60*1e3){c="stale_presence";d=d-a;d<10*60*1e3?c+="600":d<60*60*1e3&&(c+="3600");b("BanzaiODS").bumpEntityKey(3303,"presence",c)}}}});e.exports=g}),null);
__d("onAfterLoadSafe",["Run","TimeSlice","requestIdleCallback"],(function(a,b,c,d,e,f){"use strict";a=function(a){return b("TimeSlice").guard(function(){return b("Run").onAfterLoad(function(){b("requestIdleCallback")(a)})},"delayed after load",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};e.exports=a}),null);
__d("MercuryIDs",["gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={isValid:function(a){return a==null||a===""||typeof a!=="string"?!1:/^\w{3,12}:.+/.test(a)},isValidThreadID:function(a){if(!g.isValid(a))return!1;a=g.tokenize(a);switch(a.type){case"user":case"support":case"thread":case"root":return!0;default:return(a.type==="pending"||a.type==="group")&&!b("gkx")("863760")?!0:!1}},tokenize:function(a){if(a==null||a===""||!g.isValid(a))throw new Error("bad_id_format "+String(a));var b=a.indexOf(":");return{type:a.substr(0,b),value:a.substr(b+1)}},getUserIDFromParticipantID:function(a){if(!g.isValid(a))throw new Error("bad_id_format "+a);a=g.tokenize(a);var b=a.type;a=a.value;return b==="fbid"?a:null},getParticipantIDFromUserID:function(a){if(isNaN(a))throw new Error("Not a user ID: "+a);return"fbid:"+a},getUserIDFromThreadID:function(a){return!this.isCanonical(a)?null:this.tokenize(a).value},getThreadIDFromUserID:function(a){return"user:"+a},getThreadIDFromThreadFBID:function(a){return"thread:"+a},getThreadIDFromSupportInboxItemID:function(a){return"support:"+a},getThreadFBIDFromThreadID:function(a){return this.tokenize(a).value},getThreadKeyfromThreadIDUserID:function(a,b){__p&&__p();if(a==null||a===""||!g.isValid(a))throw new Error("bad_id_format "+String(a));var c=this.tokenize(a).type;a=this.tokenize(a).value;if(c!=="user")return"g"+a;c="";var d="";if(a.length!==b.length)a.length>b.length?(c=a,d=b):(c=b,d=a);else if(b===a)return b+"u"+a;else{var e=0;while(e<a.length&&e<b.length)if(a[e]===b[e])e++;else{a[e]>b[e]?(c=a,d=b):(c=b,d=a);break}}return d+"u"+c},getThreadIDFromParticipantID:function(a){a=this.getUserIDFromParticipantID(a);return a?this.getThreadIDFromUserID(a):null},getParticipantIDFromFromThreadID:function(a){a=this.getUserIDFromThreadID(a);return a?this.getParticipantIDFromUserID(a):null},getSupportInboxItemIDFromThreadID:function(a){return this.tokenize(a).value},isCanonical:function(a){return this.isValid(a)&&this.tokenize(a).type==="user"},isGroupChat:function(a){return this.isValid(a)&&this.tokenize(a).type!=="user"},isLocalThread:function(a){return this.isValid(a)&&this.tokenize(a).type==="root"}};e.exports=g}),null);
__d("WebMessengerThreadPermalinks",["MercuryIDs","MessagingTag","MessengerURIConstants","URI","WWWBase","requireWeak"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h={getThreadURI:function(a,c,d){var e="";b("MercuryIDs").isCanonical(a)?e=b("MercuryIDs").tokenize(a).value:b("requireWeak")("MercuryThreadIDMap",function(b){e=b.get().getServerIDFromClientIDNow(a)});d=h.getThreadURIFromServerID(e||"",d);c&&c(d)},getThreadURIFromServerID:function(a,c){__p&&__p();var d=new(g||(g=b("URI")))(b("WWWBase").uri),e=b("MessengerURIConstants").FACEBOOK_PREFIX;if(c)switch(c){case b("MessagingTag").OTHER:e+="/filtered";break;case b("MessagingTag").PENDING:e+="/requests";break;case b("MessagingTag").INBOX:break;default:e+="/"+c;break}d.setPath(e+b("MessengerURIConstants").THREAD_PREFIX+a);return d.toString()},getThreadURIFromUserID:function(a,c){var d=new(g||(g=b("URI")))(b("WWWBase").uri),e=b("MessengerURIConstants").FACEBOOK_PREFIX;d.setPath(i(e,c)+"/t/"+a);return d.toString()}};function i(a,c){c&&c!=b("MessagingTag").INBOX&&(a+="/"+c);return a}e.exports=h}),null);
__d("ViewportTrackingHelper",["DOMDimensions","ge","getElementPosition","getElementRect","getViewportDimensions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={isDescendantOf:function(a,b){if(a===b)return!0;while(a&&a.parentElement){if(a.parentElement===b)return!0;a=a.parentElement}return!1},isVisible:function(a,c){return g.isVisibleInDimension(b("getViewportDimensions")(),a,c)},isVisibleUnderBluebar:function(a,c){var d=b("ge")("pagelet_bluebar");return d==null?g.isVisible(a,c):g.isVisibleInDimension(b("getViewportDimensions")(),a,c,d.clientHeight)},isFullyVisibleInContainer:function(a,c){a=b("getElementRect")(a);c=b("getElementRect")(c);return c.top>=a.top&&c.bottom<=a.bottom&&c.left>=a.left&&c.right<=a.right},isVisibleInDimension:function(a,c,d,e){e===void 0&&(e=0);var f=b("getElementPosition")(c);c=b("DOMDimensions").getElementDimensions(c);if(!f.x&&!f.y&&!c.height&&!c.width)return!1;e=Math.max(f.y,e);f=Math.min(f.y+c.height,a.height);a=Math.min(c.height,d);return f-e>=a},getHeightIfVisible:function(a,c){var d=this.getHeightInViewport(a);a=b("DOMDimensions").getElementDimensions(a);a=Math.min(a.height,c);return d>=a?d:0},getHeightInViewport:function(a){var c=b("getElementPosition")(a);a=b("DOMDimensions").getElementDimensions(a);if(!c.x&&!c.y&&!a.x&&!a.y)return 0;var d=b("getViewportDimensions")().height,e=Math.max(c.y,0);c=Math.min(c.y+a.height,d);return c-e},getElementsInViewIgnoreHeight:function(a){var b=!1,c=[];for(var d=0;d<a.length;d++){var e=a[d];if(this.isVisible(e,0,null))c.push(e),b=!0;else if(b)break}return c}};e.exports=g}),null);
__d("HTMLMediaElementReadyStates",[],(function(a,b,c,d,e,f){a={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};e.exports=a}),null);
__d("VideoFrameBuffer",["HTMLMediaElementReadyStates"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b,c,d,e,f,g){d===void 0&&(d=null),e===void 0&&(e=null),f===void 0&&(f=null),g===void 0&&(g=null),this.$2=b,this.$1=a,this.$3=c||"contain",this.$6=d,this.$7=e,this.$8=f,this.$9=g}var c=a.prototype;c.updateFrameBuffer=function(){__p&&__p();this.$4&&(this.$1.width=this.$4,this.$4=null);this.$5&&(this.$1.height=this.$5,this.$5=null);if(this.$2.readyState<b("HTMLMediaElementReadyStates").HAVE_CURRENT_DATA)return;var a=this.$1.clientWidth||this.$1.width,c=this.$1.clientHeight||this.$1.height,d=a,e=c,f=this.$2.videoWidth/this.$2.videoHeight,g=d/e;this.$3==="cover"&&(g*=-1,f*=-1);g>f?d=e*f:g<f&&(e=d/f);g=this.$1.getContext("2d");if(!(g instanceof window.CanvasRenderingContext2D))return;try{if(this.$6||this.$7){g.drawImage(this.$2,(f=this.$8)!=null?f:0,(f=this.$9)!=null?f:0,(f=this.$6)!=null?f:a,(f=this.$7)!=null?f:c,0,0,a,c)}else g.drawImage(this.$2,(a-d)/2,(c-e)/2,d,e)}catch(a){if(a.name!=="NS_ERROR_NOT_AVAILABLE")throw a}};c.getDOMNode=function(){return this.$1};c.updateDimensions=function(a,b){this.$4=a,this.$5=b};return a}();e.exports=a}),null);
__d("CallbackManagerController",["ErrorGuard"],(function(a,b,c,d,e,f){__p&&__p();var g;a=function(){"use strict";__p&&__p();function a(a){this.$1=[],this.$2=[void 0],this.$3=a}var c=a.prototype;c.executeOrEnqueue=function(a,b,c){c=c||{};var d=this.$4(b,a,c);if(d)return 0;this.$2.push({fn:b,request:a,options:c});d=this.$2.length-1;this.$1.push(d);return d};c.unsubscribe=function(a){delete this.$2[a]};c.reset=function(){this.$2=[]};c.getRequest=function(a){return this.$2[a]};c.runPossibleCallbacks=function(a){__p&&__p();var b=this,c=this.$1;this.$1=[];var d=[];c.forEach(function(c){var e=b.$2[c];if(!e)return;e=b.$3(e.request,babelHelpers["extends"]({},e.options,a));e?d.push({args:e,id:c}):b.$1.push(c)});d.forEach(function(a){var c=a.args;a=a.id;var d=b.$2[a];if(!d)return;delete b.$2[a];b.$5(d.fn,c,d.request)})};c.$4=function(a,b,c){c=this.$3(b,c);c&&this.$5(a,c,b);return!!c};c.$5=function(a,c,d){d={ids:d};(g||(g=b("ErrorGuard"))).applyWithGuard(a,d,c)};return a}();e.exports=a}),null);
__d("KeyedCallbackManager",["CallbackManagerController","FBLogger"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.$1={},this.$2=new(b("CallbackManagerController"))(this.$3.bind(this))}var c=a.prototype;c.executeOrEnqueue=function(a,c){__p&&__p();if(!(a instanceof Array)){var d=a,e=c;a=[a];c=function(a){e(a[d])}}a=a.filter(function(a){var c=a!==null&&a!==void 0;c||b("FBLogger")("KeyedCallbackManager").mustfix("KeyedCallbackManager.executeOrEnqueue: key %s is invalid",JSON.stringify(a));return c});return this.$2.executeOrEnqueue(a,c)};c.unsubscribe=function(a){this.$2.unsubscribe(a)};c.reset=function(){this.$2.reset(),this.$1={}};c.getUnavailableResources=function(a){var b=this;a=this.$2.getRequest(a);var c=[];a&&(c=a.request.filter(function(a){return!b.$1[a]}));return c};c.getUnavailableResourcesFromRequest=function(a){a=Array.isArray(a)?a:[a];return a.filter(function(a){if(a!==null&&a!==void 0)return!this.$1[a]},this)};c.addResourcesAndExecute=function(a){Object.assign(this.$1,a),this.$2.runPossibleCallbacks()};c.setResource=function(a,b){this.$1[a]=b,this.$2.runPossibleCallbacks()};c.getResource=function(a){return this.$1[a]};c.getAllResources=function(){return this.$1};c.dumpResources=function(){var a={};for(var b in this.$1){var c=this.$1[b];typeof c==="object"&&(c=babelHelpers["extends"]({},c));a[b]=c}return a};c.$3=function(a){var b={};for(var c=0;c<a.length;c++){var d=a[c],e=this.$1[d];if(typeof e==="undefined")return!1;b[d]=e}return[b]};return a}();e.exports=a}),null);
__d("BlobFactory",["emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();var g;function h(){try{new a.Blob(),g=!0}catch(a){g=!1}}var i=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder;a.Blob?c={getBlob:function(b,c){__p&&__p();b=b||[];c=c||{};g===void 0&&h();if(g)return new a.Blob(b,c);else{var d=new i();for(var e=0;e<b.length;e++)d.append(b[e]);return d.getBlob(c.type)}},isSupported:b("emptyFunction").thatReturnsTrue}:c={getBlob:function(){},isSupported:b("emptyFunction").thatReturnsFalse};e.exports=c}),null);
__d("isFalsey",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a==null||!Boolean(a)}e.exports=a}),null);
__d("concatArrays",[],(function(a,b,c,d,e,f){function a(a){var b;return(b=[]).concat.apply(b,a)}e.exports=a}),null);
__d("distinctArray",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){__p&&__p();if(a==null)return[];if(Array.isArray(a)){var b=a.length;if(b<=200){var c=[];for(var d=0;d<b;d++){var e=a[d];c.indexOf(e)===-1&&c.push(e)}return c}}return Array.from(new Set(a).values())}e.exports=a}),null);
__d("filterObject",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=Object.prototype.hasOwnProperty;function a(a,b,c){if(!a)return null;var d={};for(var e in a)g.call(a,e)&&b.call(c,a[e],e,a)&&(d[e]=a[e]);return d}e.exports=a}),null);
__d("FluxStoreInstrumentation",["invariant"],(function(a,b,c,d,e,f,g){"use strict";var h=null;a={inject:function(a){h==null||g(0,2260),h=a},onEmitChange:function(a){return h?h.emitChange(a):null}};e.exports=a}),null);
__d("FluxStore",["invariant","EventEmitter","FluxStoreInstrumentation","concatArrays","distinctArray"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.__className=this.constructor.name,this.__moduleID=this.constructor.__moduleID,this.__changed=!1,this.__changeEvent="change",this.__dispatcher=a,this.__emitter=new(b("EventEmitter"))(),this.$3=!1,this.__registerDispatcherCallback(a)}var c=a.prototype;c.__registerDispatcherCallback=function(a){var b=this;this.$2=a.register(function(a){return b.__invokeOnDispatch(a)},this.__getIDForDispatcher(),this,this.__moduleID)};c.addListener=function(a){return this.__emitter.addListener(this.__changeEvent,a)};c.getActionTypes=function(){__p&&__p();if(!this.$1){var a=this.__getActionTypes();if(a!=null){var c=this.getDependencyStores();if(c.length>0){var d=!1;c=b("concatArrays")(c.map(function(a){a=a&&a.getActionTypes?a.getActionTypes():null;a==null&&(d=!0);return a}).filter(Boolean));d?a=null:a=b("distinctArray")(a.concat(c))}}this.$1=a}return this.$1};c.getDispatcher=function(){return this.__dispatcher};c.getDispatchToken=function(){return this.$2};c.getDependencyDispatchTokens=function(){this.$5||(this.$5=this.getDependencyStores().map(function(a){return a&&a.getDispatchToken&&a.getDispatchToken()}));return this.$5};c.getDependencyStores=function(){this.$4||(this.$4=b("distinctArray")(this.__getDependencyStores()));return this.$4};c.addStoreDependency=function(a){var b=this.__dispatcher.registerDependency;b&&b(this.getDispatchToken(),a.getDispatchToken())};c.hasChanged=function(){this.__dispatcher.isDispatching()||g(0,1147,this.__className);return this.__changed};c.__setAsUnchanged=function(){this.__changed=!1};c.__emitChange=function(){this.__dispatcher.isDispatching()||g(0,1148,this.__className);if(this.__changed)return;b("FluxStoreInstrumentation").onEmitChange(this.__moduleID!=null?this.__moduleID:"unknown");this.__changed=!0};c.__invokeOnDispatch=function(a){this.__changed=!1,this.__onDispatch(a),this.__inform()};c.__inform=function(a){this.$3=this.__changed||this.$3;var b=this.__dispatcher.shouldAllowInforms==null||this.__dispatcher.shouldAllowInforms();b&&this.$3&&(this.$3=!1,this.__emitter.emit(a||this.__changeEvent))};c.__onDispatch=function(a){g(0,1149,this.__className)};c.__getActionTypes=function(){return null};c.__getDependencyStores=function(){return[]};c.__getIDForDispatcher=function(){return this.__className};return a}();a;e.exports=a}),null);
__d("TypedFluxStore",["FluxStore"],(function(a,b,c,d,e,f){"use strict";e.exports=b("FluxStore")}),null);
__d("FluxReduceStore",["invariant","TypedFluxStore","abstractMethod"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.$FluxReduceStore1=b.getInitialState();return b}var d=c.prototype;d.getState=function(){return this.$FluxReduceStore1};d.getInitialState=function(){return b("abstractMethod")("FluxReduceStore","getInitialState")};d.reduce=function(a,c){return b("abstractMethod")("FluxReduceStore","reduce")};d.areEqual=function(a,b){return a===b};d.__invokeOnDispatch=function(a,b){b===void 0&&(b=!0);this.__changed=!1;var c=this.$FluxReduceStore1;a=this.reduce(c,a);a!==void 0||g(0,2189,this.constructor.name);this.areEqual(c,a)||(this.$FluxReduceStore1=a,this.__emitChange());b&&this.__inform()};d.__setState=function(a){this.$FluxReduceStore1=a};return c}(b("TypedFluxStore"));a.__moduleID=e.id;e.exports=a}),null);
__d("WorkForeignEntityType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FOREIGN:"FOREIGN",NOT_FOREIGN:"NOT_FOREIGN"})}),null);
__d("LoadOnRender.react",["React","createCancelableFunction"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$1=!1;d.$2=null;d.$3=!0;d.$4=function(a){d.$2=a,d.$1&&d.forceUpdate()};d.state={cancelableOnComponentLoad:b("createCancelableFunction")(d.$4)};c.loader(d.state.cancelableOnComponentLoad);return d}var d=c.prototype;d.componentDidMount=function(){this.$1=!0,this.$3&&this.$2!=null&&this.forceUpdate()};d.componentWillUnmount=function(){this.$1=!1,this.state.cancelableOnComponentLoad.cancel()};d.render=function(){var a=this.$2;this.$3=a==null;return!a||this.props.forcePlaceholder?this.props.placeholder:b("React").cloneElement(this.props.component,{LazyLoadedComponent:a})};return c}(b("React").Component);a.defaultProps={forcePlaceholder:!1};e.exports=a}),null);
__d("BootloadOnRender.react",["JSResource","LoadOnRender.react","React"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){b("JSResource").loadAll([d.props.loader],a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").jsx(b("LoadOnRender.react"),{placeholder:this.props.placeholder,loader:this.$1,component:this.props.component})};return c}(b("React").Component);e.exports=a}),null);
__d("LazyComponent.react",["React","isReactClassComponent"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getComponent=function(){return this.$1};d.render=function(){var a=this,c=this.props,d=c.LazyLoadedComponent;c=babelHelpers.objectWithoutPropertiesLoose(c,["LazyLoadedComponent"]);var e=b("isReactClassComponent")(d)?function(b){return a.$1=b}:null;return b("React").jsx(d,babelHelpers["extends"]({ref:e},c))};return c}(b("React").Component);a.defaultProps={LazyLoadedComponent:function(){return null}};e.exports=a}),null);
__d("CacheStorage",["ErrorGuard","EventListener","ExecutionEnvironment","FBJSON","WebStorage","emptyFunction","killswitch"],(function(a,b,c,d,e,f){__p&&__p();var g,h,i="_@_",j="3b",k="CacheStorageVersion",l={length:0,getItem:a=b("emptyFunction"),setItem:a,clear:a,removeItem:a,key:a};c=function(){"use strict";__p&&__p();function a(a){this._store=a}var b=a.prototype;b.getStore=function(){return this._store};b.keys=function(){var a=[];for(var b=0;b<this._store.length;b++){var c=this._store.key(b);c!=null&&a.push(c)}return a};b.get=function(a){return this._store.getItem(a)};b.set=function(a,b){this._store.setItem(a,b)};b.remove=function(a){this._store.removeItem(a)};b.clear=function(){this._store.clear()};b.clearWithPrefix=function(a){a=a||"";var b=this.keys();for(var c=0;c<b.length;c++){var d=b[c];d!=null&&d.startsWith(a)&&this.remove(d)}};return a}();d=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var c;return a.call(this,(c=(g||(g=b("WebStorage"))).getLocalStorage())!=null?c:l)||this}c.available=function(){return!!(g||(g=b("WebStorage"))).getLocalStorage()};return c}(c);f=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var c;return a.call(this,(c=(g||(g=b("WebStorage"))).getSessionStorage())!=null?c:l)||this}c.available=function(){return!!(g||(g=b("WebStorage"))).getSessionStorage()};return c}(c);var m=function(){"use strict";__p&&__p();function a(){this._store={}}var b=a.prototype;b.getStore=function(){return this._store};b.keys=function(){return Object.keys(this._store)};b.get=function(a){return this._store[a]===void 0?null:this._store[a]};b.set=function(a,b){this._store[a]=b};b.remove=function(a){a in this._store&&delete this._store[a]};b.clear=function(){this._store={}};b.clearWithPrefix=function(a){a=a||"";var b=this.keys();for(var c=0;c<b.length;c++){var d=b[c];d.startsWith(a)&&this.remove(d)}};a.available=function(){return!0};return a}(),n={memory:m,localstorage:d,sessionstorage:f};a=function(){"use strict";__p&&__p();function a(a,c){__p&&__p();this._changeCallbacks=[];this._key_prefix="_cs_";this._exceptionMessage=null;c&&(this._key_prefix=c);if(a=="AUTO"||!a)for(var d in n){c=n[d];if(c.available()){a=d;break}}a&&(!n[a]||!n[a].available()?(b("ExecutionEnvironment").canUseDOM,this._backend=new m()):this._backend=new n[a]());c=this.useBrowserStorage();c&&b("EventListener").listen(window,"storage",this._onBrowserValueChanged.bind(this));a=c?this._backend.getStore().getItem(k):this._backend.getStore()[k];a!==j&&(b("killswitch")("CACHE_STORAGE_MODULE_CLEAR_OWN_KEYS")?this.clear():this.clearOwnKeys())}var c=a.prototype;c.useBrowserStorage=function(){return this._backend.getStore()===(g||(g=b("WebStorage"))).getLocalStorage()||this._backend.getStore()===(g||(g=b("WebStorage"))).getSessionStorage()};c.addValueChangeCallback=function(a){var b=this;this._changeCallbacks.push(a);return{remove:function(){b._changeCallbacks.slice(b._changeCallbacks.indexOf(a),1)}}};c._onBrowserValueChanged=function(a){this._changeCallbacks&&String(a.key).startsWith(this._key_prefix)&&this._changeCallbacks.forEach(function(b){b(a.key,a.oldValue,a.newValue)})};c.keys=function(){var a=this,c=[];(h||(h=b("ErrorGuard"))).guard(function(){if(a._backend){var b=a._backend.keys(),d=a._key_prefix.length;for(var e=0;e<b.length;e++)b[e].substr(0,d)==a._key_prefix&&c.push(b[e].substr(d))}},{name:"CacheStorage"})();return c};c.set=function(c,d,e){__p&&__p();if(this._backend){if(this.useBrowserStorage()&&a._persistentWritesDisabled){this._exceptionMessage="writes disabled";return!1}var f;typeof d==="string"?f=i+d:!e?(f={__t:Date.now(),__v:d},f=b("FBJSON").stringify(f)):f=b("FBJSON").stringify(d);e=this._backend;d=this._key_prefix+c;c=!0;var g=null;while(c)try{g=null,e.set(d,f),c=!1}catch(a){g=a;var h=e.keys().length;this._evictCacheEntries();c=e.keys().length<h}if(g!==null){this._exceptionMessage=g.message;return!1}else{this._exceptionMessage=null;return!0}}this._exceptionMessage="no back end";return!1};c.getLastSetExceptionMessage=function(){return this._exceptionMessage};c.getStorageKeyCount=function(){var a=this._backend;return a?a.keys().length:0};c._evictCacheEntries=function(){__p&&__p();var c=[],d=this._backend;d.keys().forEach(function(f){__p&&__p();if(f===k)return;var g=d.get(f);if(g===void 0){d.remove(f);return}if(a._hasMagicPrefix(g))return;try{g=b("FBJSON").parse(g,e.id)}catch(a){d.remove(f);return}g&&g.__t!==void 0&&g.__v!==void 0&&c.push([f,g.__t])});c.sort(function(a,b){return a[1]-b[1]});for(var f=0;f<Math.ceil(c.length/2);f++)d.remove(c[f][0])};c.get=function(c,d){__p&&__p();var f;if(this._backend){(h||(h=b("ErrorGuard"))).applyWithGuard(function(){f=this._backend.get(this._key_prefix+c)},this,[],{onError:function(){f=null},name:"CacheStorage:get"});if(f!=null)if(a._hasMagicPrefix(f))f=f.substr(i.length);else try{f=b("FBJSON").parse(f,e.id),f&&f.__t!==void 0&&f.__v!==void 0&&(f=f.__v)}catch(a){f=void 0}else f=void 0}f===void 0&&d!==void 0&&(f=d,this.set(c,f));return f};c.remove=function(a){this._backend&&(h||(h=b("ErrorGuard"))).applyWithGuard(this._backend.remove,this._backend,[this._key_prefix+a],{name:"CacheStorage:remove"})};c._setVersion=function(){this.useBrowserStorage()?this._backend.getStore().setItem(k,j):this._backend.getStore()[k]=j};c.clear=function(){this._backend&&((h||(h=b("ErrorGuard"))).applyWithGuard(this._backend.clear,this._backend,[],{name:"CacheStorage:clear"}),this._setVersion())};c.clearOwnKeys=function(){this._backend&&((h||(h=b("ErrorGuard"))).applyWithGuard(this._backend.clearWithPrefix,this._backend,[this._key_prefix],{name:"CacheStorage:clearOwnKeys"}),this._setVersion())};a.getAllStorageTypes=function(){return Object.keys(n)};a._hasMagicPrefix=function(a){return a.substr(0,i.length)===i};a.disablePersistentWrites=function(){a._persistentWritesDisabled=!0};return a}();a._persistentWritesDisabled=!1;e.exports=a}),null);
__d("MarauderLogger",["Banzai","CacheStorage","MarauderConfig"],(function(a,b,c,d,e,f){__p&&__p();var g="client_event",h="navigation",i=18e4,j="marauder",k="marauder_last_event_time",l="marauder_last_session_id",m={},n=[],o=!1,p=null,q=null,r=null,s=0,t,u,v=!1,w=null,x=!1;function a(){G().set(k,y())}b("Banzai").subscribe(b("Banzai").SHUTDOWN,a);function y(){t=t||G().get(k)||0;return t}function z(){v||(u=G().get(l),v=!0);var a=Date.now();(!u||a-i>y())&&(u=a.toString(16)+"-"+(~~(Math.random()*16777215)).toString(16),G().set(l,u));return u}function A(){return{user_agent:window.navigator.userAgent,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,density:window.screen.devicePixelRatio||null,platform:window.navigator.platform||null,locale:window.navigator.language||null}}function B(){return{locale:navigator.language}}function C(b,a,c,d,f,g,h){var i=h||Date.now();t=h?Date.now():i;a=a||p;return{name:b,time:i/1e3,module:a,obj_type:d,obj_id:f,uuid:g,extra:c}}function D(a,b,c){return C("content",null,{flags:b},null,null,a,c)}function E(a){__p&&__p();var b=window.__mrdr;if(b)for(var c in b){var d=b[c];if(d[3]!==0){delete b[c];if(c==="1")if(r!==null)c=r;else continue;a.push(D(c,1,d[1]));a.push(D(c,2,d[2]));a.push(D(c,3,d[3]))}}}function F(a){__p&&__p();E(a);if(a.length===0)return;o&&a.push(C("counters",null,m));var c=b("Banzai").BASIC,d=b("MarauderConfig").gk_enabled;s===0&&d&&(a.push(C("device_status",null,B())),c={delay:5e3});d&&Math.random()<.01&&a.push(C("device_info",null,A()));if(r!==null)for(var d=0;d<a.length;d++){var e=a[d];(e.uuid===null||e.uuid===void 0)&&(e.uuid=r)}e={app_ver:b("MarauderConfig").app_version,data:a,log_type:g,seq:s++,session_id:z()};d=G().get("device_id");d&&(e.device_id=d);m={};o=!1;b("Banzai").post(j,e,c)}function G(){x||(x=!0,w=new(b("CacheStorage"))("localstorage",""));return w}function c(a){m[a]||(m[a]=0),m[a]++,o=!0}function H(b,a,c,d,f,g,h){F([C(b,a,c,d,f,g,h)])}function I(a,b){p!==b&&(n.push(C(h,p,{dest_module:b,source_url:q,destination_url:a})),p=b,q=a)}function d(a,b){p!==b&&(r=null,I(a,b))}function f(a,b,c){H(b?"show_module":"hide_module",a,c)}function J(a){p=a}function K(){return p}function L(a){r===null&&(r=a,a!==null&&(F(n),n=[]))}e.exports={count:c,log:H,navigateTo:d,navigateWithinSession:I,toggleModule:f,setUUID:L,setNavigationModule:J,getNavigationModule:K}}),null);
__d("onAfterDisplay",["NavigationMetrics","TimeSlice","requestIdleCallback"],(function(a,b,c,d,e,f){"use strict";var g=[],h=!1;function a(a){a=b("TimeSlice").guard(a,"onAfterDisplay invocation",{propagationType:b("TimeSlice").PropagationType.ORPHAN});h?b("requestIdleCallback")(a):g.push(a)}b("NavigationMetrics").addRetroactiveListener(b("NavigationMetrics").Events.EVENT_OCCURRED,function(a,c){["all_pagelets_displayed","e2e"].indexOf(c.event)>-1&&!h&&(h=!0,g.forEach(function(a){b("requestIdleCallback")(a)}))});e.exports=a}),null);
__d("getVendorPrefixedEventName",["fbjs/lib/ExecutionEnvironment"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;c["ms"+a]="MS"+b;c["O"+a]="o"+b.toLowerCase();return c}var g={animationend:a("Animation","AnimationEnd"),animationiteration:a("Animation","AnimationIteration"),animationstart:a("Animation","AnimationStart"),transitionend:a("Transition","TransitionEnd")},h={},i={};b("fbjs/lib/ExecutionEnvironment").canUseDOM&&(i=document.createElement("div").style,"AnimationEvent"in window||(delete g.animationend.animation,delete g.animationiteration.animation,delete g.animationstart.animation),"TransitionEvent"in window||delete g.transitionend.transition);function c(a){if(h[a])return h[a];else if(!g[a])return a;var b=g[a];for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c)&&c in i)return h[a]=b[c];return""}e.exports=c}),null);
__d("ReactTransitionEvents",["fbjs/lib/ExecutionEnvironment","getVendorPrefixedEventName"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[];function a(){var a=b("getVendorPrefixedEventName")("animationend"),c=b("getVendorPrefixedEventName")("transitionend");a&&g.push(a);c&&g.push(c)}b("fbjs/lib/ExecutionEnvironment").canUseDOM&&a();function h(a,b,c){a.addEventListener(b,c,!1)}function i(a,b,c){a.removeEventListener(b,c,!1)}c={addEndEventListener:function(a,b){if(g.length===0){window.setTimeout(b,0);return}g.forEach(function(c){h(a,c,b)})},removeEndEventListener:function(a,b){if(g.length===0)return;g.forEach(function(c){i(a,c,b)})}};e.exports=c}),null);